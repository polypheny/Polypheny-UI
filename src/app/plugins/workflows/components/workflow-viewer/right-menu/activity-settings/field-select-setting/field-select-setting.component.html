@if (def().simplified) {
    simplified view is not yet implemented
    <!--TODO: implement simplified view, take reorderability into consideration-->
} @else {
    <c-row>
        <c-col [xs]="6">
            <h5>Exclude</h5>
            <c-card class="list-container border bg-light mb-3">
                <ul cListGroup cdkDropList id="list-exclude" flush="true" class="field-list"
                    [cdkDropListConnectedTo]="['list-include']" [cdkDropListData]="val().exclude" (cdkDropListDropped)="drop($event)">
                    @for (field of val().exclude; track field) {
                        <li cListGroupItem cdkDrag [class.border-bottom]="$last" [cdkDragDisabled]="!isEditable()" class="field-entry">
                            <div class="d-flex justify-content-between">
                                {{ field }}
                                <app-delete-confirm (delete)="delete('exclude', $index)" *ngIf="isEditable()"></app-delete-confirm>
                            </div>
                            <div class="custom-placeholder" *cdkDragPlaceholder></div>
                        </li>
                    }
                </ul>
            </c-card>
            <c-input-group class="mb-3" sizing="sm" *ngIf="isEditable()">
                <input cFormControl placeholder="name to exclude" #addExclude/>
                <button cButton color="secondary" type="button" variant="outline"
                        (click)="add('exclude', addExclude.value); addExclude.value=''" [disabled]="addExclude.value.length == 0">
                    Add
                </button>
            </c-input-group>

        </c-col>
        <c-col [xs]="6">
            <h5>Include</h5>
            <c-card class="list-container border bg-light mb-3">
                <ul cListGroup *ngIf="firstIsFixed()" flush="true">
                    <li cListGroupItem color="dark">
                        {{ val().include[0] }}
                    </li>
                </ul>
                <ul cListGroup cdkDropList id="list-include" flush="true" class="field-list"
                    [cdkDropListConnectedTo]="['list-exclude']" [cdkDropListData]="val().include" (cdkDropListDropped)="drop($event)">
                    @for (field of val().include; track field) {
                        <li cListGroupItem cdkDrag [class.border-bottom]="$last" [hidden]="firstIsFixed() && $first" class="field-entry"
                            [cdkDragDisabled]="$first && firstIsFixed() || !isEditable()">
                            <div class="d-flex justify-content-between">
                                {{ field }}
                                <app-delete-confirm (delete)="delete('include', $index)" *ngIf="isEditable()"></app-delete-confirm>
                            </div>
                        </li>
                    }
                </ul>
            </c-card>
            <c-input-group class="mb-3" sizing="sm" *ngIf="isEditable()">
                <input cFormControl placeholder="name to include" #addInclude/>
                <button cButton color="secondary" type="button" variant="outline"
                        (click)="add('include', addInclude.value); addInclude.value=''" [disabled]="addInclude.value.length == 0">
                    Add
                </button>
            </c-input-group>
        </c-col>
    </c-row>
    <p class="text-muted" *ngIf="isEditable()"><em>Drag and drop the entries to modify the lists.</em></p>

    <c-form-check [switch]="true" class="mb-3">
        <input cFormCheckInput id="check" type="checkbox" [checked]="val().unspecifiedIndex >= 0"
               name="fusion-check" (change)="unknownChanged($event)" [disabled]="!isEditable()">
        <label cFormCheckLabel for="check">Include unknown fields</label>
    </c-form-check>
    @if (val().unspecifiedIndex >= 0 && def().reorder) {
        <c-input-group>
            <span cInputGroupText id="basic-addon1">Insertion Index</span>
            <input cFormControl sizing="sm" id="setting"
                   type="number" autocomplete="off" [disabled]="!isEditable()" (change)="valueChanged()"
                   [min]="firstIsFixed() ? 1 : 0" [(ngModel)]="val().unspecifiedIndex">

        </c-input-group>
    }
}
