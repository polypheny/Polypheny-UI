<div [hidden]="!visible()" class="no-select d-flex flex-row border-end h-100"
     [ngClass]="{'info-visible': openedActivityDef,'info-hidden': !openedActivityDef}">
    <div class="add-activity-col flex-grow-1 d-flex flex-column h-100">
        <div class="px-3 py-2 bg-light border-bottom menu-header">
            <h3 class="mb-0">Add Activity</h3>
        </div>
        <div class="px-3 py-2 border-bottom">
            <c-input-group class="mb-1">
                <span cInputGroupText class="cil-search bg-transparent"></span>
                <input class="activity-search" cFormControl type="search" value="search" [(ngModel)]="filterText"
                       (input)="filterList()"
                       placeholder="Search by name">
            </c-input-group>
            <angular2-multiselect id="category-multi-selector" [data]="dropdownCats" [(ngModel)]="selectedCategories"
                                  [settings]="dropdownSettings"
                                  (onSelect)="onItemSelect($event)"
                                  (onDeSelect)="OnItemDeSelect($event)">
                <c-item>
                    <ng-template let-item="item">
                        <span>{{ item.itemName }}</span>
                    </ng-template>
                </c-item>
            </angular2-multiselect>
            <c-form-check [switch]="true" class="mt-1">
                <input cFormCheckInput id="show-description" type="checkbox" [(ngModel)]="showDescription"
                       name="show-description">
                <label cFormCheckLabel for="show-description">Show Description</label>
            </c-form-check>
        </div>

        <div class="activity-list px-2 flex-grow-1" cdkDropList cdkDropListSortingDisabled="true">
            @for (activity of filteredList; track activity.type) {
                <div class="px-2 mb-1">
                    <c-card cdkDrag [cdkDragData]="activity.type" class="draggable" color="light"
                            [cBorder]="activity === openedActivityDef && 'primary'"
                            (cdkDragDropped)="onDragDropped($event)">
                        <c-card-body class="p-2 activity-card">
                            <div class="d-flex flex-row justify-content-between">
                                <div (click)="create.emit(activity.type)">
                                    <h6 class="flex-grow-1">{{ activity.displayName }}</h6>
                                    <small *ngIf="showDescription">{{ activity.shortDescription }}</small>
                                </div>
                                <div>
                                        <span class="fa fa-question-circle px-2 info-button"
                                              [ngClass]="activity === openedActivityDef ? 'text-primary' : 'text-secondary'"
                                              style="cursor: pointer;" (click)="openedActivityDef = activity">
                                        </span>
                                </div>
                            </div>
                        </c-card-body>
                    </c-card>
                    <!--<div class="bg-primary draggable" *cdkDragPreview>
                        <h5>{{ activity.displayName }}</h5>
                    </div>-->
                </div>
            }
        </div>

    </div>
    <div *ngIf="openedActivityDef" class="border-start flex-grow-1 info-col d-flex flex-column">
        <div class="px-3 py-2 border-bottom menu-header d-flex">
            <h4 class="mb-0">{{ openedActivityDef.displayName }}</h4>
            <button cButtonClose class="text-reset ms-auto" (click)="openedActivityDef=null"></button>
        </div>
        <div class="pt-3 px-3 activity-info flex-grow-1">
            <app-activity-help [def]="openedActivityDef"></app-activity-help>
        </div>
    </div>

</div>
