<div class="row">

  <div class="col-lg-12">
    <h5>{{tableId}}</h5>
  </div>

  <table class="table table-hover table-striped" *ngIf="resultSet">
    <thead>
      <tr>
        <th class="small-col">PK</th>
        <th>Name</th>
        <th>Nullable</th>
        <th>Type</th>
        <th>Collection</th>
        <th>Default</th>
        <th class="small-col"></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let col of resultSet.header; let i = index" [ngClass]="{'editing': editingCol === col.physicalName}">
        <td class="small-col"><i class="icon-key" *ngIf="col.primary"></i></td>
        <td>
          <span *ngIf="editingCol !== col.physicalName">{{col.name}}</span>
          <i *ngIf="editingCol !== col.physicalName" class="cui-pencil rename ml-2" (click)="editingCol = col.physicalName"></i>
          <div class="input-group input-group-sm" *ngIf="editingCol === col.physicalName" style="max-width: 200px">
            <input type="text" class="form-control form-control-sm" [placeholder]="col.name" autofocus (keyup.enter)="renameCol(col, columnNameInput.value)" #columnNameInput>
            <div class="input-group-append">
              <button class="btn btn-primary btn-sm input-group" (click)="renameCol(col, columnNameInput.value)">rename</button>
            </div>
          </div>
        </td>
        <td><i class="fa fa-check" *ngIf="col.nullable"></i></td>
        <td>{{col.dataType}}</td>
        <td>{{col.collectionsType}}</td>
        <td>{{col.defaultValue}}</td>
        <th class="small-col"><app-delete-confirm (delete)="dropColumn(col)"></app-delete-confirm></th>
      </tr>
    <tr *ngFor="let col of getAddableColumns()" class="hidden-col" [ngClass]="{'editing': editingCol === col.physicalName}">
      <ng-container *ngIf="editingCol !== col.physicalName">
        <td class="small-col"><i class="icon-key" *ngIf="col.primary"></i></td>
        <td>{{col.name}}</td>
        <td><i class="fa fa-check" *ngIf="col.nullable"></i></td>
        <td>{{col.dataType}}</td>
        <td>{{col.collectionsType}}</td>
        <td>{{col.defaultValue}}</td>
        <th class="small-col"><i class="fa fa-eye add-col" (click)="editingCol = col.physicalName"></i></th>
      </ng-container>
      <ng-container *ngIf="editingCol === col.physicalName">
        <td class="small-col"><i class="icon-key" *ngIf="col.primary"></i></td>
        <td>
          <input type="text" class="form-control form-control-sm" style="max-width: 250px" [value]="col.name" placeholder="name" #newName (keyup.enter)="addColumn(col, newName.value, newDefault.value)">
        </td>
        <td><i class="fa fa-check" *ngIf="col.nullable"></i></td>
        <td>{{col.dataType}}</td>
        <td>{{col.collectionsType}}</td>
        <td>
          <input type="text" class="form-control form-control-sm" placeholder="default value" style="max-width: 250px" #newDefault (keyup.enter)="addColumn(col, newName.value, newDefault.value)">
        </td>
        <th class="small-col"><i class="fa fa-save add-col btn btn-primary btn-sm" (click)="addColumn(col, newName.value, newDefault.value)"></i></th>
      </ng-container>
    </tr>
    </tbody>
  </table>

</div>
